{"version":3,"sources":["admin.js","ajax-settings.js","reports.js"],"names":["jQuery","document","ready","$","snippet_type","anonymizeip","anonymizeip_checkbox","gtm_id","disable_element","el","attr","enable_element","removeAttr","set_checked_value","bool","checked","widget","bridge","ui","tooltip","gaetooltip","position","my","at","collision","on","this","is","show","hide","e","slideDown","preventDefault","slideUp","val","sessionStorage","getItem","css","pointer-events","opacity","prop","checkbox","index","data","trackValue","eventValue","trigger","window","open","gaeAjax","openAndPoplulateEventModal","id_post","modalId","ajax","type","url","wpflow_ajax","ajax_url","post_id","action","success","result","modal","populateMetaEditForm","meta","input","hasOwnProperty","error","alert","saveGAView","nonce","viewId","ajax_nonce","location","reload","signOutFromGoogleAnalytics","redirect_url","btoa","protocol","host","pathname","search","accessToken","removeItem","submitEventForm","form","serialize","fn","noConflict","toggleClass","href","Promise","resolve","global_from_date","global_to_date","g","fjs","queryString","refresh_report","urlParams","URLSearchParams","currentPage","get","ga_reports","ga_view_id","async","allEventsReportRequest","includeEmptyRows","dateRanges","startDate","endDate","metrics","expression","dimensions","name","top10DownloadsReportRequest","filtersExpression","orderBys","fieldName","orderType","sortOrder","pageSize","top10EmailLinksReportRequest","reportResponse","queryReports","drawLineChart","reports","rows","drawTableChart","displayGeneralReports","filterExpressionArray","Array","filterExpression","clicksCategories","push","clicksLabels","clicksActions","allClicksReportRequest","join","top10ClicksByCategoryReportRequest","top10ClicksByLabelReportRequest","top10ClicksByActionReportRequest","displayClicksReports","scrollCategories","scrollLabels","scrollActions","allScrollEventsReportRequest","top10ScrollByCategoryReportRequest","top10ScrollByLabelReportRequest","top10ScrollByActionReportRequest","displayScrollReports","redirect2AuthProxy","w","d","gapi","analytics","q","cb","js","createElement","getElementsByTagName","src","parentNode","insertBefore","onload","load","google","charts","packages","auth","response","authenticate","then","r","fromDate","moment","subtract","startOf","toDate","endOf","format","daterangepicker","datepickerOptions","numberOfMonths","minDate","maxDate","altFormat","start","end","change","event","dateRange","tokenCreated","setItem","timeElapsed","Date","now","timeRemaining","authorize","serverAuth","access_token","viewSelector","ViewSelector","container","toggle","execute","ids","reportBatchRequests","client","request","path","root","method","body","reportRequests","title","xAxisName","xAxisType","yAxisName","yAxisType","reportRows","chartContainer","visualization","DataTable","addColumn","length","forEach","row","addRow","stringDate","year","substr","month","day","D","getFullYear","getMonth","getDate","parseInt","values","Line","getElementById","draw","convertOptions","curveType","legend","textStyle","fontSize","col1Name","col1Type","col2Name","col2Type","options","setColumnProperty","showRowNumber","width","height","addRows","minWidth","Table"],"mappings":"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","file":"admin-scripts.min.js","sourcesContent":["/**\n * Created with IntelliJ IDEA.\n * User: yuval\n * Date: 2/25/15\n * Time: 1:08 PM\n * To change this template use File | Settings | File Templates.\n */\n\njQuery(document).ready(function($){\n\n\tvar snippet_type = $('#snippet_type');\n\tvar anonymizeip = $('#anonymizeip');\n\tvar anonymizeip_checkbox = $('#anonymizeip')[0];\n\tvar gtm_id = $('#gtm_id');\n\tvar script_debug_mode_input = $('#script_debug_mode');\n\n\t// Helpers to avoid repetition\n\tfunction disable_element(el){\n\t\tel.attr(\"disabled\", true);\n\t}\n\n\tfunction enable_element(el){\n\t\tel.removeAttr(\"disabled\");\n\t}\n\n\tfunction set_checked_value(el, bool){\n\t\tel.checked = bool;\n\t}\n\n\t// set up tooltips\n\t$.widget.bridge('gaetooltip', $.ui.tooltip);\n\n\t$('.ga-tooltip').gaetooltip({position: {\n\t\tmy: \"left bottom-10\",\n\t\tat: \"right top\",\n\t\tcollision: \"none\"\n\t}\n\t})\n\n\t$('#advanced:checkbox').on('change', function (){\n\t\tvar checked = $(this).is(':checked');\n\t\tif (checked){\n\t\t\t$('#forcesnopperwrap').show();\n\t\t\t$('#wpflow_gs_reports_section').show();\n\t\t} else {\n\t\t\t$('#forcesnopperwrap').hide();\n\t\t\t$('#wpflow_gs_reports_section').hide();\n\t\t}\n\t});\n\n\t$('.btn_upload').on('click', function (e){\n\t\t$('.settings_content').slideDown();\n\t\te.preventDefault();\n\t});\n\n\t$('.btn_close').on('click', function (e){\n\t\t$('.settings_content').slideUp();\n\t\te.preventDefault();\n\t});\n\n\t$('.popup').on('click', function (e){\n\t\t$('.popup').slideUp();\n\t\te.preventDefault();\n\t});\n\n\n\t/*\n\t * The following section deals with the snippet type options in the admin UI\n\t */\n\n\t// If page loads and snippet type is 'none' or 'gtm', disable anonymize IP checkbox\n\tif (snippet_type.val()=== 'none' || snippet_type.val()=== 'gtm'){\n\t\tset_checked_value(anonymizeip_checkbox, false);\n\t\tdisable_element(anonymizeip);\n\t}\n\n\t// If page loads and snippet_type is 'gtm', enable gtm_id\n\tif (snippet_type.val()=== 'gtm'){\n\t\tenable_element(gtm_id);\n\t} else {\n\t\tdisable_element(gtm_id);\n\t}\n\n\t// When the snippet type option is changed\n\tsnippet_type.on('change', function (){\n\t\t// Store current value\n\t\tvar val = $(this).val();\n\n\t\t// If 'none' is selected, disable anonymize zip checkbox and ?\n\t\tif (val === 'none' || val === 'gtm'){\n\t\t\tset_checked_value(anonymizeip_checkbox, false);\n\t\t\tdisable_element(anonymizeip);\n\t\t} else {\n\t\t\tenable_element(anonymizeip);\n\t\t}\n\n\t\t// If gtm snippet is selected\n\t\tif (val === 'gtm'){\n\t\t\tenable_element(gtm_id);\n\t\t} else {\n\t\t\tdisable_element(gtm_id);\n\t\t}\n\t});\n\n\t// Snippet section ends\n\n\t// The following section deals with the import settings functinality in\n\t// general settings\n\t$('.btn_upload').on('click', function (e){\n\t\t$('.settings_content').slideDown();\n\t\te.preventDefault();\n\t});\n\n\t$('.btn_close').on('click', function (e){\n\t\t$('.settings_content').slideUp();\n\t\te.preventDefault();\n\t});\n\n\t$('.popup').on('click', function (e){\n\t\t$('.popup').slideUp();\n\t\te.preventDefault();\n\t});\n\n\t// import section ends\n\n    // GA client Signout section\n\n    // If page loads and there is no gaAccessToken then disable signout button.\n    if (!sessionStorage.getItem('gaAccessToken')) {\n\t\tdisable_element($('.btn_signout_ga'));\n\t  }\t\n\n\n\t// Disable checkbox for admin options management permission\n\t$('input[name=\"ga_events_options[permitted_roles][]\"][value=\"administrator\"]').css({'pointer-events': 'none',\n\t\t'opacity': 0.5}).prop('checked', true);\n\n\t$('.divs-istracktime:checkbox').on('change', function (){\n\t\tvar checkbox = $(this);\n\t\tvar checked = checkbox.is(':checked');\n\t\tvar index = checkbox.data('track');\n\t\tvar trackValue = \"#track-elem\" + index;\n\t\tvar eventValue = \"#eventValue\" + index;\n\t\tif (checked){\n\t\t\t$(trackValue).show();\n\t\t\t$(eventValue).attr(\"disabled\", true);\n\t\t} else {\n\t\t\t$(trackValue).hide();\n\t\t\t$(eventValue).removeAttr(\"disabled\");\n\t\t}\n\n\t});\n\n\t$('#empty-istracktime:checkbox').on('change', function (){\n\t\tvar checkbox = $(this);\n\t\tvar checked = checkbox.is(':checked');\n\t\tvar trackValue = \"#empty-trackelem\";\n\t\tvar eventValue = \"#empty-eventValue\";\n\t\tif (checked){\n\t\t\t$(trackValue).show();\n\t\t\t$(eventValue).attr(\"disabled\", true);\n\t\t} else {\n\t\t\t$(trackValue).hide();\n\t\t\t$(eventValue).removeAttr(\"disabled\");\n\t\t}\n\n\t});\n\n\t$('.divs-istracktime').trigger('change');\n\n\tfunction isUrlValid(url){\n\t\treturn /^(https?|s?ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test(url);\n\t}\n\n\t\n\tjQuery('body').on('click','a[href=\"admin.php?page=wp-google-analytics-events-upgrade\"]', function (e) {\n\t\te.preventDefault();\n\t\twindow.open('https://wpflow.com/upgrade/?utm_source=wpadmin&utm_medium=banner&utm_campaign=nav', '_blank');\n\t});\n});\n","/*global\n $, wpflow_ajax, jslint, alert\n */\nvar gaeAjax = ( function ( $ ) {\n\n  $(document).ready( function ( $ ) {\n\n    // Handle twitter bootstrap modals\n    if (typeof $.fn.modal.noConflict !== \"undefined\") {\n      var bootstrapModal = $.fn.modal.noConflict();\n    }\n\n    // Form Submit\n      $(\".wpgae-event-form\").on('submit', submitEventForm);\n    // Populate and Show the edit event modal\n    $(\".ga_main .edit a\").on('click', openAndPoplulateEventModal);\n    // Populate and Show the Delete event modal\n    $(\".ga_main .delete a\").on('click', openAndPoplulateEventModal);\n    $(\"#ga-save-view\").on('click', saveGAView);\n    $('.btn_signout_ga').on('click', signOutFromGoogleAnalytics);\n\n    $('.deactivate a[href*=\"wp-google-analytics-events\"], #wpgae-modal-cancel a').on('click', function(e) {\n      e.preventDefault();\n      $(\"#wpgae-modal-content, #wpgae-modal-background\").toggleClass(\"active\");\n      $(\"#wpgae-just-deactivate\").attr(\"href\", this.href);\n    });\n\n    $('#wpgae-feedback-form').on('submit', function (e) {\n      e.preventDefault(); // avoid to execute the actual submit of the form.\n      var form = $(this);\n\n      $.ajax({\n        type: \"POST\",\n        url: wpflow_ajax.ajax_url,\n        data: form.serialize(), // serializes the form's elements.\n        success: function(data)\n        {\n          window.location = $(\"#wpgae-just-deactivate\").attr(\"href\");\n        }\n      });\n\n    });\n\n  });\n\n\n  function openAndPoplulateEventModal(e) {\n    e.preventDefault();\n    var id_post = $(this).attr('id');\n    var modalId = \"#\" + $(this).data(\"action\");\n    $.ajax({\n      type: 'POST',\n      url: wpflow_ajax.ajax_url,\n      data: {\n        'post_id': id_post,\n        'action': 'wpflow_get_event_json'\n      },\n      success: function (result) {\n        $(modalId).modal();\n        populateMetaEditForm(modalId, result.meta);\n        $(modalId + \" #event_id\").val(id_post);\n      },\n      error: function () {\n        alert(\"Error updating event\");\n      }\n    });\n  }\n\n  function saveGAView(e) {\n    var nonce = $(this).data(\"nonce\");\n    $.ajax({\n      type: \"post\", url: wpflow_ajax.ajax_url, data: {\n        'viewId': $(this).val(), 'action': 'wpflow_save_view', 'ajax_nonce': nonce,\n      }, success: function (data) {\n        window.location.reload();\n      }\n    });\n  }\n\n  function signOutFromGoogleAnalytics(e) {\n    e.preventDefault();\n    var nonce = $(this).data(\"delete-nonce\");\n    $.ajax({\n      type: \"post\", url: wpflow_ajax.ajax_url, data: {\n        'viewId': $(this).val(), 'action': 'wpflow_ga_disconnect', 'ajax_nonce': nonce,\n      },\n      success: function (data) {\n        var redirect_url = btoa( window.location.protocol+ \"//\" + window.location.host+window.location.pathname+window.location.search);\n        var accessToken = btoa(sessionStorage.getItem('gaAccessToken'));\n        sessionStorage.removeItem('gaAccessToken');\n        sessionStorage.removeItem('gaTokenCreated');\n        // var encodedRedirectUrl = encodeURIComponent(redirect_url);\n        // var encodedAccessToken = encodeURIComponent(accessToken);\n        window.location = 'https://auth.wpflow.com/ga/sign_out/?redirectUrl=' + redirect_url + '&accessToken=' + accessToken;\n      }\n    });\n  }\n\n  function submitEventForm(e) {\n    e.preventDefault();\n    var form = $(this);\n\n    $.ajax({\n      type: \"post\",\n      url: wpflow_ajax.ajax_url,\n      data: form.serialize(),\n      success: function (data) {\n        window.location.reload();\n      }\n    });\n  }\n  \n  function populateMetaEditForm(modal, meta) {\n    if (typeof meta !== \"undefined\") {\n      for (var input in meta) {\n        if (meta.hasOwnProperty(input)) {\n          if ($(modal + \" #\" + input).is(\":checkbox\")) {\n            if (meta[input][0] === \"true\") {\n              $(modal + \" #\" + input).attr(\"checked\", true);\n            } else {\n              $(modal + \" #\" + input).removeAttr(\"checked\", false);\n            }\n          } else {\n            $(modal + \" #\" + input).val(meta[input][0]);\n          }\n        }\n      }\n    }\n  }\n\n} )( jQuery );\n\n\n\n\n\n\n ","\n\n(function () {\n\n  var queue = Promise.resolve();\n  // Starting point..\n\n\n  var queryString = window.location.search;\n  var urlParams = new URLSearchParams(queryString);\n  var report = urlParams.get(\"report\") === \"true\";\n  var global_from_date,global_to_date;\n\n  if (report) {\n    (function (w, d, s, g, js, fjs) {\n      g = w.gapi || (w.gapi = {});\n      g.analytics = {\n        q: [], ready: function (cb) {\n          this.q.push(cb)\n        }\n      };\n      js = d.createElement(s);\n      fjs = d.getElementsByTagName(s)[0];\n      js.src = 'https://apis.google.com/js/platform.js';\n      fjs.parentNode.insertBefore(js, fjs);\n      js.onload = function () {\n        g.load('analytics')\n      };\n    }(window, document, 'script'));\n\n    google.charts.load('current', {'packages': ['corechart', 'line', 'table']});\n    gapi.analytics.ready(function () {\n\n    // Put your application code here...\n\n      // Register on authorization success event\n\n      gapi.analytics.auth.on('signIn', function (response) {\n        // if (typeof ga_reports.ga_view_id === 'undefined') {\n        //dateRangeSelector.execute();\n      });\n\n      // Call the authenticate function that will take care to authorize the user\n      authenticate().then(r => {\n        // Set default date range for the reports\n        var fromDate = moment().subtract(30,'days').startOf('day').toDate();\n        var toDate = moment().endOf('day').toDate();\n        global_from_date = moment(fromDate).format('YYYY-MM-DD');\n        global_to_date = moment(toDate).format('YYYY-MM-DD');\n\n        //Display the date range selector\n        jQuery('#daterange').daterangepicker({\n          datepickerOptions : {\n            numberOfMonths : 2,\n            minDate: '-12M',\n            maxDate: '+0',\n            altFormat: \"yyyy-mm-dd\"\n          }\n        });\n\n        jQuery('#daterange').daterangepicker(\"setRange\",{start: fromDate, end: toDate });\n        jQuery('#daterange').daterangepicker({change: function(event, data) {\n            var dateRange = jQuery('#daterange').daterangepicker(\"getRange\");\n            global_from_date = moment(dateRange.start).format('YYYY-MM-DD');\n            global_to_date = moment(dateRange.end).format('YYYY-MM-DD');\n            refresh_report();\n          }\n        });\n\n        refresh_report();\n      });\n    });\n  }\n\n  function refresh_report() {\n\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const currentPage = urlParams.get(\"page\");\n\n    if (typeof ga_reports === 'undefined' || typeof ga_reports.ga_view_id === 'undefined'){\n      return;\n    }\n    if (currentPage === \"wp-google-analytics-events\") {\n      displayGeneralReports();\n    } else if (currentPage === \"wp-google-analytics-events-click\") {\n      displayClicksReports();\n    } else if (currentPage === \"wp-google-analytics-events-scroll\") {\n       displayScrollReports();\n    }\n  }\n\n\n  function redirect2AuthProxy() {\n    var redirect_url = btoa(window.location.protocol + \"//\" + window.location.host + window.location.pathname + window.location.search);\n    // we need to actually redirect to allow redirection to google\n    window.location = 'https://auth.wpflow.com/ga/auth/' + redirect_url;\n  }\n\n  // This function authenticates the user. It first checks if the user is authenticated already in this session by checking\n  // for client code. If there is no client code it redirects to the authentication proxy to get a client code\n\n  const authenticate = async () => {\n\n    const queryString = window.location.search;\n    queryString;\n    const urlParams = new URLSearchParams(queryString);\n\n    if (sessionStorage.getItem('gaAccessToken')) {\n      accessToken = sessionStorage.getItem('gaAccessToken');\n      tokenCreated = sessionStorage.getItem('gaTokenCreated')\n    } else if (urlParams.get('gaToken')) {\n      accessToken = urlParams.get('gaToken');\n      tokenCreated = urlParams.get('gaTokenCreated') * 1000; // to miliseconds\n      sessionStorage.setItem('gaAccessToken', accessToken);\n      sessionStorage.setItem('gaTokenCreated', tokenCreated);\n    } else {\n      accessToken = null;\n      tokenCreated = null;\n    }\n\n    // First check if we have already an access token in the session.\n\n    if (!accessToken) { // if there is no access token then let's get it from the proxy\n      jQuery('.ga-reports-no-auth').toggle();\n    } else { // There is a token, let's check if it is still valid.\n             timeElapsed = (Date.now() - tokenCreated) / 1000; //to seconds\n             timeRemaining = 3600 - timeElapsed;      // 3600 seconds TTL for access token\n             if (timeRemaining < 120) {     //\n                   sessionStorage.removeItem('gaAccessToken');\n                   sessionStorage.removeItem('gaTokenCreated');\n                   redirect2AuthProxy();\n             } else if (typeof ga_reports === 'undefined' || typeof ga_reports.ga_view_id === 'undefined') {\n                   await gapi.analytics.auth.authorize({\n                       serverAuth: {\n                           access_token: accessToken\n                       }\n                   });\n                   // Token is valid, check if the view is selected, if not present the view form\n\n                   var viewSelector = new gapi.analytics.ViewSelector({container: 'view-selector'});\n                   jQuery('.ga-view-form').toggle();\n\n                   viewSelector.execute();    // Run the view selector after a successful authentication\n\n                   viewSelector.on('change', function (ids) {\n                      jQuery('#ga-save-view').val(ids);\n                   });\n             } else {\n                   jQuery('.ga-reports-section').css(\"display\", \"flex\");\n                   // Now authorize the user for analytics API given the access token to the gapi object\n                   await gapi.analytics.auth.authorize({\n                       serverAuth: {\n                          access_token: accessToken\n                       }\n                   });\n             }\n    }\n\n    jQuery('#ga-auth').on('click', function (e) {\n      e.preventDefault();\n      redirect2AuthProxy();\n    });\n\n  }\n\n// Starting point..\n\n  async function displayGeneralReports() {\n    var allEventsReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], dimensions: [{\n        name: 'ga:date',\n      }],\n    }\n\n    var top10DownloadsReportRequest = {\n      viewId: ga_reports.ga_view_id,  includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: 'ga:eventAction==Download', dimensions: [{\n        name: 'ga:eventLabel',\n      }], orderBys: [{\n        fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    var top10EmailLinksReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: 'ga:eventAction==Email Link', dimensions: [{\n        name: 'ga:eventLabel',\n      }], orderBys: [{\n        fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n\n    var generalReportBatchRequests = [allEventsReportRequest, top10DownloadsReportRequest, top10EmailLinksReportRequest];\n    reportResponse = await queryReports(generalReportBatchRequests);\n    drawLineChart(\"All Event Clicks\", \"Date\", \"date\", \"Events\", \"number\", reportResponse.result.reports[0].data.rows, 'all-events-chart');\n    drawTableChart(\"Top 10 Downloads\", \"Top 10 Downloads\", \"string\", \"Downloads\", \"number\", reportResponse.result.reports[1].data.rows, 'top10-downloads-chart');\n    drawTableChart(\"Top 10 Email Links\", \"Top 10 Email Links\", \"string\", \"Clicks\", \"number\", reportResponse.result.reports[2].data.rows, 'top10-email-links-chart');\n  }\n\n  async function displayClicksReports() {\n    // Since there are other categories/labels/actions which are not related to clicks we need to filter the clicks only according to the\n    // relevant defined categories/labels/actions. In case they are not defined we need to define a dummy filter\n\n    var filterExpressionArray = new Array;\n    var filterExpression = \"\";\n\n    if (ga_reports.clicksCategories) filterExpressionArray.push(ga_reports.clicksCategories);\n    if (ga_reports.clicksLabels) filterExpressionArray.push(ga_reports.clicksLabels);\n    if (ga_reports.clicksActions) filterExpressionArray.push(ga_reports.clicksActions);\n    if (filterExpression.length = 0) filterExpressionArray.push (\"ga:eventCategory==-9999999\"); // Dummy expression in case all are blanks\n\n    var allClicksReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpressionArray.join(), dimensions: [{\n        name: 'ga:date',\n      }],\n    }\n\n    filterExpression = ga_reports.clicksCategories ? ga_reports.clicksCategories : \"ga:eventCategory==-9999999\";\n    var top10ClicksByCategoryReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression , dimensions: [{\n        name: 'ga:eventCategory',\n      }], orderBys: [{\n        fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    filterExpression = ga_reports.clicksLabels ? ga_reports.clicksLabels : \"ga:eventLabel==-9999999\";\n    var top10ClicksByLabelReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression, dimensions: [{\n        name: 'ga:eventLabel',\n      }], orderBys: [{\n        fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    filterExpression = ga_reports.clicksActions ? ga_reports.clicksActions : \"ga:eventAction==-9999999\";\n    var top10ClicksByActionReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression, dimensions: [{\n        name: 'ga:eventAction',\n      }], orderBys: [{\n         fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    var allClicksReportBatchRequests = [allClicksReportRequest, top10ClicksByCategoryReportRequest,top10ClicksByLabelReportRequest,top10ClicksByActionReportRequest];\n    reportResponse = await queryReports(allClicksReportBatchRequests);\n    drawLineChart(\"All Clicks\", \"Date\", \"date\", \"Events\", \"number\", reportResponse.result.reports[0].data.rows, 'all-clicks-chart');\n    drawTableChart(\"\", \"Top 10 Clicks by Category\", \"string\", \"Clicks\", \"number\", reportResponse.result.reports[1].data.rows, 'top10-clicks-by-category-chart');\n    drawTableChart(\"\", \"Top 10 Clicks by Label\", \"string\", \"Clicks\", \"number\", reportResponse.result.reports[2].data.rows, 'top10-clicks-by-label-chart');\n    drawTableChart(\"\", \"Top 10 Clicks by Action\", \"string\", \"Clicks\", \"number\", reportResponse.result.reports[3].data.rows, 'top10-clicks-by-action-chart');\n  }\n\n  async function displayScrollReports() {\n    // Since there are other categories/labels/actions which are not related to clicks we need to filter the clicks only according to the\n    // relevant defined categories/labels/actions. In case they are not defined we need to define a dummy filter\n\n    var filterExpressionArray = new Array;\n    var filterExpression = \"\";\n\n    if (ga_reports.scrollCategories) filterExpressionArray.push(ga_reports.scrollCategories);\n    if (ga_reports.scrollLabels) filterExpressionArray.push(ga_reports.scrollLabels);\n    if (ga_reports.scrollActions) filterExpressionArray.push(ga_reports.scrollActions);\n    if (filterExpression.length = 0) filterExpressionArray.push (\"ga:eventCategory==-9999999\"); // Dummy expression in case all are blanks\n\n    var allScrollEventsReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpressionArray.join(), dimensions: [{\n        name: 'ga:date',\n      }],\n    }\n\n    filterExpression = ga_reports.scrollCategories ? ga_reports.scrollCategories : \"ga:eventCategory==-9999999\";\n    var top10ScrollByCategoryReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression , dimensions: [{\n        name: 'ga:eventCategory',\n      }], orderBys: [{\n         fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    filterExpression = ga_reports.scrollLabels ? ga_reports.scrollLabels : \"ga:eventLabel==-9999999\";\n    var top10ScrollByLabelReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression, dimensions: [{\n        name: 'ga:eventLabel',\n      }], orderBys: [{\n         fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    filterExpression = ga_reports.scrollActions ? ga_reports.scrollActions : \"ga:eventAction==-9999999\";\n    var top10ScrollByActionReportRequest = {\n      viewId: ga_reports.ga_view_id, includeEmptyRows: true, dateRanges: [{\n        startDate: global_from_date, endDate: global_to_date\n      }], metrics: [{\n        expression: 'ga:totalEvents'\n      }], filtersExpression: filterExpression, dimensions: [{\n        name: 'ga:eventAction',\n      }], orderBys: [{\n         fieldName: 'ga:totalEvents', orderType: 'VALUE', sortOrder: \"DESCENDING\"\n      }], pageSize: 10\n    }\n\n    var allScrollReportBatchRequests = [allScrollEventsReportRequest, top10ScrollByCategoryReportRequest,top10ScrollByLabelReportRequest,top10ScrollByActionReportRequest];\n    reportResponse = await queryReports(allScrollReportBatchRequests);\n    drawLineChart(\"All Scroll Events\", \"Date\", \"date\", \"Events\", \"number\", reportResponse.result.reports[0].data.rows, 'all-scroll-events-chart');\n    drawTableChart(\"\", \"Top 10 Scroll Events by Category\", \"string\", \"Events\", \"number\", reportResponse.result.reports[1].data.rows, 'top10-scroll-by-category-chart');\n    drawTableChart(\"\", \"Top 10 Scroll Events by Label\", \"string\", \"Events\", \"number\", reportResponse.result.reports[2].data.rows, 'top10-scroll-by-label-chart');\n    drawTableChart(\"\", \"Top 10 Scroll Events by Action\", \"string\", \"Events\", \"number\", reportResponse.result.reports[3].data.rows, 'top10-scroll-by-action-chart');\n  }\n\n\n\n// Query the API and print the results to the page.\n  function queryReports(reportBatchRequests) {\n    return gapi.client.request({\n      path: '/v4/reports:batchGet', root: 'https://analyticsreporting.googleapis.com/', method: 'POST', body: {\n        reportRequests: reportBatchRequests,\n      }\n    });\n  }\n\n  function toDate(stringDate) {\n    var year = stringDate.substr(0, 4), month = stringDate.substr(4, 2) - 1,    // -1 as months are 0 indexed\n      day = stringDate.substr(6, 2);\n    var D = new Date(year, month, day);\n    return (D.getFullYear() == year && D.getMonth() == month && D.getDate() == day) ? D : 'invalid date';\n  }\n\n  function drawLineChart(title, xAxisName, xAxisType, yAxisName, yAxisType, reportRows, chartContainer) {\n\n    var data = new google.visualization.DataTable();\n\n    data.addColumn(xAxisType, xAxisName);\n    data.addColumn(yAxisType, yAxisName);\n    if ((reportRows != null) && (reportRows != undefined) && (reportRows.length > 0)) {\n      reportRows.forEach(row => data.addRow([toDate(row.dimensions[0]), parseInt(row.metrics[0].values[0])]));\n    }\n    var options = {\n      //title: title,\n      curveType: 'function', legend: {position: 'bottom', textStyle: {fontSize:12}},\n    };\n\n    var chart = new google.charts.Line(document.getElementById(chartContainer));\n    chart.draw(data, google.charts.Line.convertOptions(options));\n  }\n\n  function drawTableChart(title, col1Name, col1Type, col2Name, col2Type, reportRows, chartContainer) {\n\n    var data = new google.visualization.DataTable();\n\n\n    var options;\n    if ((reportRows != null) && (reportRows != undefined) && (reportRows.length > 0)) {\n      data.addColumn(col1Type, col1Name);\n      data.addColumn(col2Type, col2Name);\n      data.setColumnProperty(0, 'className', 'ga-top-chart-text');\n      reportRows.forEach(row => data.addRow([row.dimensions[0], parseInt(row.metrics[0].values[0])]));\n      options = {\n        showRowNumber: true, width: '100%', height: '100%',\n      };\n    } else {\n      data.addColumn(\"string\", col1Name);\n      data.setColumnProperty(0, 'className', 'ga-top-chart-text-empty');\n      data.addRows( [[ \"No events found\"]]);\n      options = {\n        showRowNumber: false, width: '100%', height: '391px', minWidth: '100px'\n      };\n    }\n\n\n\n    var table = new google.visualization.Table(document.getElementById(chartContainer));\n    table.draw(data, options);\n  }\n\n\n})();\n"]}